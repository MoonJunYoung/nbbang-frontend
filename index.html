<!doctype html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <link rel="png" href="/public/images/nbbang.png" />
        <meta property="og:url" content="nbbang.life" />
        <meta property="og:title" content="ì—”ë¹µ" />
        <meta property="og:type" content="website" />
        <meta property="og:image" content="nbbangMetaPng.png" />
        <meta property="og:description" content="ë¹ ë¥¸ ì •ì‚°, ì›í´ë¦­ ì†¡ê¸ˆ" />
        <meta
            http-equiv="Content-Security-Policy"
            content="upgrade-insecure-requests"
        />
        <link rel="icon" href="favicon.ico" />
        <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
            rel="stylesheet"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
        <meta name="theme-color" content="#0044FE" />
        <link rel="icon" type="image/png" href="/public/images/nbbang.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-color" content="#0044FE" />
        <link rel="apple-touch-icon" href="/public/images/nbbang.png" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"
        />
        <meta name="description" content="ë¹ ë¥¸ ì •ì‚°, ì›í´ë¦­ ì†¡ê¸ˆ" />
        <title>ì—”ë¹µ</title>
        <script>
            (function () {
                console.log("ğŸš€ [ì„œë¹„ìŠ¤ ì›Œì»¤ ì œê±° ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰]");
                
                // âœ… ë¬´í•œ ë¦¬ë¡œë“œ ë°©ì§€: ìƒˆë¡œê³ ì¹¨ ì—¬ë¶€ ì²´í¬
                if (!localStorage.getItem("reloadOnce")) {
                    localStorage.setItem("reloadOnce", "true"); // ìƒˆë¡œê³ ì¹¨ í”Œë˜ê·¸ ì €ì¥
        
                    // 1ï¸âƒ£ ì„œë¹„ìŠ¤ ì›Œì»¤ í•´ì œ
                    if ("serviceWorker" in navigator) {
                        navigator.serviceWorker.getRegistrations().then((registrations) => {
                            registrations.forEach((registration) => {
                                registration.unregister().then(() => {
                                    console.log("âœ… [ì„œë¹„ìŠ¤ ì›Œì»¤ ì‚­ì œ ì™„ë£Œ]");
                                });
                            });
                        });
                    }
        
                    // 2ï¸âƒ£ ê¸°ì¡´ ìºì‹œ ì‚­ì œ (JS, API ì‘ë‹µ ë“±)
                    if (window.caches) {
                        caches.keys().then((cacheNames) => {
                            cacheNames.forEach((cacheName) => {
                                caches.delete(cacheName).then(() => {
                                    console.log(`âœ… [ìºì‹œ ì‚­ì œ ì™„ë£Œ]: ${cacheName}`);
                                });
                            });
                        });
                    }
        
                    // 3ï¸âƒ£ ê°•ì œ ìƒˆë¡œê³ ì¹¨ (í•œ ë²ˆë§Œ ì‹¤í–‰)
                    setTimeout(() => {
                        window.location.reload(true);
                    }, 2000); // 2ì´ˆ í›„ ì‹¤í–‰
                } else {
                    console.log("ğŸ›‘ [ì„œë¹„ìŠ¤ ì›Œì»¤ ì œê±° ìŠ¤í¬ë¦½íŠ¸] ì´ë¯¸ ì‹¤í–‰ë¨, ìƒˆë¡œê³ ì¹¨ ë°©ì§€");
                    localStorage.removeItem("reloadOnce"); // í”Œë˜ê·¸ ì´ˆê¸°í™”
                }
            })();
        </script>
    </head>
    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="root"></div>
        <script type="module" src="/src/main.jsx"></script>
    </body>
</html>
